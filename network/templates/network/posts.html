{% extends "network/layout.html" %}

{% block body %}

<!-- Modal toggle -->
<button id="modal-toggle-button" data-modal-target="authentication-modal" data-modal-toggle="authentication-modal" class="fixed right-0 bottom-0 block text-white focus:outline-none  font-medium rounded-lg text-sm px-5 py-2.5 text-center " type="button">
  <div class="flex items-center justify-center flex-1 h-full p-2 bg-blue-800 text-white shadow rounded-full">
    <div class="relative">
      <svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" />
      </svg>
    </div>
  </div></button>

<!-- Main modal -->
<div id="authentication-modal" tabindex="-1" aria-hidden="true" class="fixed top-0 left-0 right-0 z-50 hidden w-full p-4 overflow-x-hidden overflow-y-auto md:inset-0 h-[calc(100%-1rem)] max-h-full">
    <div class="relative w-full max-w-md max-h-full">
        <!-- Modal content -->
        <div class="fixed right-36 bottom-36 bg-white rounded-lg shadow dark:bg-gray-700 scale-150">
            <button id="close_button" type="button" class="absolute top-3 right-2.5 text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ml-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white" data-modal-hide="authentication-modal">
                <svg class="w-3 h-3" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 14 14">
                    <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"/>
                </svg>
                <span class="sr-only">Close modal</span>
            </button>
            <div class="px-6 py-6 lg:px-8 ">
                <h3 class="mb-4 text-xl font-medium text-gray-900 dark:text-white">Add a new post</h3>
                <!-- Form -->
                <form action="{% url 'posts' %}" method="POST">
                  {% csrf_token %}
                  <div>
                    <label for="title"  class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Title</label>
                    <input name="title" type="text" id="title" class="mb-3 bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Give it a title" required>
                  </div>  
                  <div class="rounded-t-lg">

                    <label for="comment" class="block mb-2 text-sm font-medium text-gray-900 dark:text-white">Your message</label>
                    <textarea name="content" id="comment" rows="4" class="block p-2.5 w-full text-sm text-gray-900 bg-gray-50 rounded-lg border border-gray-300 focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500" placeholder="Write your thoughts here..."></textarea>

                    <!-- <label for="comment" class="sr-only text-gray-900">Your comment</label>
                    <textarea name="content" id="comment" rows="4" class=" w-full px-0 text-sm text-gray-900  dark:bg-gray-800 focus:ring-0  placeholder-white" placeholder="Write a post..." required></textarea> -->
                  </div>
                  <button type="submit" class="mt-3 text-white bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-sm w-full sm:w-auto px-5 py-2.5 text-center dark:bg-blue-600 dark:hover:bg-blue-700 dark:focus:ring-blue-800">Post</button>
                </form>
            </div>
        </div>
    </div>
</div> 
    <section class="text- bg-white dark:bg-gray-900">
        <div class="py-8 px-4 mx-auto max-w-screen-xl lg:py-16 lg:px-6">
            <div class="grid gap-8 lg:grid-cols-2 ">
                {% for post in posts %}
                  <!-- Card-->
                  <article class="h-fit text-black dark:text-white mb-4 break-inside p-6 rounded-xl bg-slate-100 dark:bg-slate-800 flex flex-col bg-clip-border">
                    <div class="flex pb-6 items-center justify-between">
                      <div class="flex">
                        <a class="inline-block mr-4" href="#">
                          <img class="rounded-full max-w-none w-14 h-14" src="{{post.author.image.url}}" />
                        </a>
                        <div class="flex flex-col">
                          <div class="flex items-center">
                            <a class="inline-block text-lg font-bold mr-2" href="#"> {{post.author.first_name}} {{post.author.last_name}}</a>
                            <span class="text-slate-500 dark:text-slate-300">{{post.created_at}}</span>
                          </div>
                          <div class="text-slate-500 dark:text-slate-300">
                            English
                          </div>
                        </div>
                      </div>
                    </div>
                    <h2 class="text-3xl font-extrabold">
                      {{ post.title }}
                    </h2>
                    <div class="py-4">
                      <p>
                        {{post.content}}
                      </p>
                    </div>
                    <div class="py-4">
                      <a class="inline-flex items-center" href="#">
                        <span class="mr-2">
                          <svg class="fill-rose-600 dark:fill-rose-400" style="width: 24px; height: 24px;" viewBox="0 0 24 24">
                            <path
                              d="M12,21.35L10.55,20.03C5.4,15.36 2,12.27 2,8.5C2,5.41 4.42,3 7.5,3C9.24,3 10.91,3.81 12,5.08C13.09,3.81 14.76,3 16.5,3C19.58,3 22,5.41 22,8.5C22,12.27 18.6,15.36 13.45,20.03L12,21.35Z">
                            </path>
                          </svg>
                        </span>
                        <span class="text-lg font-bold">{{post.likes.count}}</span>
                      </a>
                    </div>
                    
                    <!-- More comments -->
                    <div class="w-full">
                      <a href="{% url 'post' post_id=post.id%}"
                        class="py-3 px-4 w-full block bg-slate-100 dark:bg-slate-700 text-center rounded-lg font-medium hover:bg-slate-200 dark:hover:bg-slate-600 transition ease-in-out delay-75">Show
                        more comments +{{post.comments.count}}</a> 
                        Use a modal to display the entire modal with comments with view transition API
                    </div>
                    <!-- End More comments -->
                  <!-- End Comments content -->
                </article>
                <!-- Close card -->       
              {% endfor %}
            </div>  
        </div>
    </section>
    
    <script>
      // Get references to the toggle button and modal element
      const toggleButton = document.getElementById('modal-toggle-button');
      const modal = document.getElementById('authentication-modal');
      const close_button = document.getElementById('close_button')
    
      // Add a click event listener to the toggle button
      toggleButton.addEventListener('click', function() {
        // Toggle the 'hidden' class on the modal to show or hide it
        modal.classList.toggle('hidden');
      });
      close_button.addEventListener("click",() =>{
        modal.classList.toggle('hidden');
      })
    </script>

  
{% endblock %}